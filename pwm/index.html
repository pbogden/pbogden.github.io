<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>THE DATA... | Hello Framework</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.css">
<link rel="modulepreload" href="./_observablehq/client.js">
<link rel="modulepreload" href="./_observablehq/runtime.js">
<link rel="modulepreload" href="./_observablehq/stdlib.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/_esm.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.14/_esm.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/_esm.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/_esm.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/_esm.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/_esm.js">
<script type="module">

import {define} from "./_observablehq/client.js";
import {registerFile} from "./_observablehq/stdlib.js";

registerFile("./data/pwm.json", {"name":"./data/pwm.json","mimeType":"application/json","path":"./_file/data/pwm.1bde01af.json","lastModified":1713745425404});

define({id: "ddd35d14", inputs: ["FileAttachment"], outputs: ["data","weekday","month"], body: async (FileAttachment) => {
const data = await FileAttachment("./data/pwm.json").json()
const weekday = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
const month = ["January","February","March","April","May","June","July","August","September","October","November","December"];
data.forEach(d => d.date = new Date(d.date))
data.forEach(d => d.weekday = weekday[d.date.getDay()])
data.forEach(d => d.month = month[d.date.getMonth()])
return {data,weekday,month};
}});

define({id: "f3e9bbd4", inline: true, inputs: ["resize","Plot","data","display"], body: async (resize,Plot,data,display) => {
display(await(
  resize((width) => Plot.plot({
    style: "overflow: visible;",
    grid: true,
    color: {range: ['#1b9e77', 'pink', 'goldenrod', '#7570b3'], legend: true},
    marks: [
      Plot.lineX(data, {x: "date", y: "occupied", stroke: "lot", tip: "x"}),
      Plot.ruleY([2781],{stroke: 'gray'}), // Capacity of Garage, Surface & Pink Lot
//      Plot.ruleY([3131],{stroke: 'steelblue'}), // Capacity of Garage, Surface & Pink Lot + Toye lots
      Plot.ruleY([3778],{stroke: 'steelblue'}), // PWM capacity (Master Plan),
      Plot.ruleY([3778],{stroke: 'steelblue'}), // PWM capacity (Master Plan + Toye lots),
      Plot.ruleY([4128],{stroke: 'crimson'}), // PWM capacity (Master Plan + Park & Fly purchased after 2019)
      Plot.tip(
        [`PWM 2018 total capacity (Master Plan).`],
        {x : new Date("2023-04-19"), y: 3778, anchor: "bottom"} ), 
      Plot.tip(
        [`PWM 2024 capacity (includes Park & Fly)`],
        {x : new Date("2023-10-19"), y: 4128, anchor: "bottom"} ), 
      Plot.tip(
        [`April 19 (spring break) capacity reached`],
        {x : new Date("2023-04-19"), y: 2808, anchor: "bottom"} ), 
        ]}))
))
}});

define({id: "e781cf1d", inline: true, inputs: ["resize","Plot","pwmstats","display"], body: async (resize,Plot,pwmstats,display) => {
display(await(
  resize((width) => Plot.plot({
    style: "overflow: visible;",
    grid: true,
    color: {type: "ordinal", legend: true, scheme: "Set1"},
    marks: [
      Plot.lineX(pwmstats, {x: "date", y: "total_passengers", stroke: "year", tip: "x"}),
      Plot.axisX({ticks: "month", tickFormat: "  %b",}),
      Plot.ruleX([new Date("2023-4-19")],{stroke: 'black'}), // Spring break
      Plot.tip(
        [`19 April 2023 (spring break)`],
        {x: new Date("2023-04-19"), y: 200000, anchor: "bottom"}), 
    ]
  })
  )
))
}});

define({id: "aa6bce6d", inline: true, inputs: ["resize","Plot","pink","display"], body: async (resize,Plot,pink,display) => {
display(await(
  resize((width) => Plot.plot({
    style: "overflow: visible;",
    grid: true,
    color: {range: ['pink'], legend: true},
    marks: [
      Plot.lineX(pink, {x: "date", y: "occupied", stroke: "lot", tip: "x"}),
      Plot.ruleY([459],{stroke: 'red'}), // Pink Lot capacity
      Plot.tip(
        [`April 19 (spring break) capacity reached`],
        {x : new Date("2023-04-19"), y: 461, anchor: "bottom"} ), 
   ]
  }))
))
}});

define({id: "b11377ec", inline: true, inputs: ["Plot","pink","d3","display"], body: async (Plot,pink,d3,display) => {
display(await(
  Plot.plot({
//    x: {domain: ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"], label: null},
      x: {domain: ["January","February","March","April","May","June","July","August","September","October","November","December"]},
    y: {grid: true},
    marks: [
      Plot.rectY(pink, Plot.groupX({y: "mean"}, {y: "occupied", x: "month", fill:"pink"})),
      Plot.link(pink,
        Plot.groupX(
          {
            y1: (pink) => d3.mean(pink) - d3.deviation(pink),
            y2: (pink) => d3.mean(pink) + d3.deviation(pink)
          },
          {
            y: "occupied",
            x: "month",
            stroke: "red",
            strokeWidth: 3
          }
        )
      )
    ]
  })
))
}});

define({id: "6c08f265", inputs: ["data"], outputs: ["pwmstats","pink"], body: (data) => {
const pwmstats = [
  {year: "2019", month: "Jan", mon: 1, enplanements: 64824, deplanements: 59125, total_passengers: 123949},
  {year: "2019", month: "Feb", mon: 2, enplanements: 65678, deplanements: 62754, total_passengers: 128432},
  {year: "2019", month: "Mar", mon: 3, enplanements: 77180, deplanements: 78643, total_passengers: 155823},
  {year: "2019", month: "Apr", mon: 4, enplanements: 78421, deplanements: 80304, total_passengers: 158725},
  {year: "2019", month: "May", mon: 5, enplanements: 84340, deplanements: 91073, total_passengers: 175413},
  {year: "2019", month: "Jun", mon: 6, enplanements: 100525, deplanements: 108639, total_passengers: 209164},
  {year: "2019", month: "Jul", mon: 7, enplanements: 119151, deplanements: 120648, total_passengers: 239799},
  {year: "2019", month: "Aug", mon: 8, enplanements: 127461, deplanements: 123914, total_passengers: 251375},
  {year: "2019", month: "Sep", mon: 9, enplanements: 113123, deplanements: 107916, total_passengers: 221039},
  {year: "2019", month: "Oct", mon: 10, enplanements: 110707, deplanements: 101358, total_passengers: 212065},
  {year: "2019", month: "Nov", mon: 11, enplanements: 77611, deplanements: 76088, total_passengers: 153699},
  {year: "2019", month: "Dec", mon: 12, enplanements: 75017, deplanements: 75654, total_passengers: 150671},
  {year: "2023", month: "Jan", mon: 1, enplanements:  50858, deplanements: 47869, total_passengers: 98727},
  {year: "2023", month: "Feb", mon: 2, enplanements:  53356, deplanements: 51774, total_passengers: 105130},
  {year: "2023", month: "Mar", mon: 3, enplanements:  64199, deplanements: 66292, total_passengers: 130491},
  {year: "2023", month: "Apr", mon: 4, enplanements:  67148, deplanements: 69014, total_passengers: 136162},
  {year: "2023", month: "May", mon: 5, enplanements:  79938, deplanements: 85653, total_passengers: 165591},
  {year: "2023", month: "Jun", mon: 6, enplanements:  115579, deplanements: 124829, total_passengers: 240408},
  {year: "2023", month: "Jul", mon: 7, enplanements:  137002, deplanements: 138513, total_passengers: 275515},
  {year: "2023", month: "Aug", mon: 8, enplanements:  143021, deplanements: 136950, total_passengers: 279971},
  {year: "2023", month: "Sep", mon: 9, enplanements:  124579, deplanements: 122228, total_passengers: 246807},
  {year: "2023", month: "Oct", mon: 10, enplanements:  127249, deplanements: 119195, total_passengers: 246444},
  {year: "2023", month: "Nov", mon: 11, enplanements:  78570, deplanements: 75220, total_passengers: 153790},
//  {year: "2023", month: "Dec", mon: 12, enplanements:  67538, deplanements: 71867, total_passengers: 139405},
//  {year: "2024", month: "Jan", mon: 1, enplanements: 52905, deplanements: 49893, total_passengers: 102798},
//  {year: "2024", month: "Feb", mon: 2, enplanements: 66107, deplanements: 63606, total_passengers: 129713},
//  {year: "2024", month: "Mar", mon: 3, enplanements: 73260, deplanements: 72060, total_passengers: 145320},
];
pwmstats.forEach(d => d.date = new Date(2023, d.mon))

const pink = data.filter(d => d.lot == "Pink Lot");
return {pwmstats,pink};
}});

</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<style>

.hero {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: var(--sans-serif);
  margin: 4rem 0 8rem;
  text-wrap: balance;
  text-align: center;
}

.hero h1 {
  margin: 2rem 0;
  max-width: none;
  font-size: 14vw;
  font-weight: 900;
  line-height: 1;
  background: linear-gradient(30deg, var(--theme-foreground-focus), currentColor);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero h2 {
  margin: 0;
  max-width: 34em;
  font-size: 20px;
  font-style: initial;
  font-weight: 500;
  line-height: 1.5;
  color: var(--theme-foreground-muted);
}

@media (min-width: 640px) {
  .hero h1 {
    font-size: 90px;
  }
}

</style>
<div id="cell-ddd35d14" class="observablehq observablehq--block"></div>
<h1 id="the-data..." tabindex="-1"><a class="observablehq-header-anchor" href="#the-data...">THE DATA...</a></h1>
<!-- 2023 DAILY PARKING -->
<div class="grid grid-cols-2">
<div class="card"><span id="cell-f3e9bbd4" class="observablehq--loading"></span>
</div>
<!-- 2019 & 2023 ENPLANEMENTS -->
<div class="card"><span id="cell-e781cf1d" class="observablehq--loading"></span>
</div>
</div>
<div class="grid grid-cols-2">
<div class="card">
  <ul>
    <h1>Daily Parking: 2023</h1>
    <li>Daily data plotted for Garage, Surface and Pink Lot only.
    </li><li>Capacity reached on April 17 (spring break)
    </li><li>Second busiest day: 20 October
    </li><li>Garage, Surface &amp; Pink Lot capacity: 2,784
    </li><li>PWM 2018 total capacity: 3,778 (Master Plan)
    </li><li>PWM 2024 total capacity: 4,128 (includes Park &amp; Fly)
    </li><li>City purchased Park &amp; Fly after Master Plan was published.
    </li><li>Park &amp; Fly is used for overflow only and sits empty most of the year.
    </li><li>Data sources: Jetport (excel file) &amp; Master Plan
  </li></ul>
</div>
<div class="card">
  <ul>
    <h1>Total Passengers: 2019 &amp; 2023</h1>
    <li>Jetport is busiest in the summer (largest number of enplanements).
    </li><li>Summer enplanements exceed pre-pandemic maximum.
    </li><li>Winter enplanements in 2023 were lower than pre-pandemic.
    </li><li>Peak parking is unrelated to number of enplanements.
    </li><li>Peak parking occurs on a few special dates (e.g., spring break).
    </li><li>Park &amp; Fly (on-site) is used for overflow only and sits empty most of the year.
    </li><li>Data source: www.portlandjetport.org
  </li></ul>
</div>
</div>
<h1 id="the-solution..." tabindex="-1"><a class="observablehq-header-anchor" href="#the-solution...">THE SOLUTION...</a></h1>
<div class="grid grid-cols-2">
<!-- PINK LOT ALONE -->
<div class="card"><span id="cell-aa6bce6d" class="observablehq--loading"></span>
</div>
<!-- PINK LOT HISTOGRAM -->
<div class="card"><span id="cell-b11377ec" class="observablehq--loading"></span>
</div>
</div>
<div class="grid grid-cols-2">
<div class="card">
  <ul>
    <h1>Pink Lot data shows...</h1>
    <li>Pink Lot (off-site) is underused in the summer, when the Jetport is busiest.
    </li><li>Pink Lot fills even when on-site lots have open spots.
    </li><li>Pink Lot, like general parking, is NOT related to total enplanements.
    </li><li>Conclusion #1: Summah people don't use the Pink Lot, but Mainers do!
    </li><li>Conclusion #2: Expanded on-site parking will sit empty most of the year.
  </li></ul>
</div>
<div class="card">
  <ul>
    <h1>Recommended parking solution...</h1>
    <li>Expand Pink Lot or other off-site parking.
    </li><li>This was proposed in Paul Bradbury's 2019 Letter to the City Manager.
    </li><li>The 2019 Letter was quoted heavily at the April 2024 public meeting.
  </li></ul>
</div>
</div>
<div id="cell-6c08f265" class="observablehq observablehq--block"></div>
</main>
<footer id="observablehq-footer">
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2024-04-24T09:08:57">Apr 24, 2024</a>.</div>
</footer>
</div>
